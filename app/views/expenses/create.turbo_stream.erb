<% if @expense.valid? && @expense.persisted? %>
  <%= turbo_stream.prepend "expenses_list" do %>
    <%= render ExpenseComponent.new(expense: @expense) %>
  <% end %>
  
  <% if @from_dashboard && @dashboard %>
    <%= turbo_stream.replace 'current_balance' do %>
      <%= render partial: 'dashboard/current_balance', locals: { dashboard: @dashboard } %>
    <% end %>
    
    <%= turbo_stream.replace 'budgets_summary' do %>
      <%= render partial: 'budgets/budget_summary', locals: { dashboard: @dashboard } %>
    <% end %>
  <% end %>
<% end %>

<%= render_turbo_stream_flash_messages %>
